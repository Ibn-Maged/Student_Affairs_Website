<!DOCTYPE html>
<html>
    <head>
        <title id = "t">View User</title>
        <link  rel = "icon" href = "images/logo.jpg"  type = "image/x-icon">

        <meta name = "author" content = "Sara Walid">

        <script src="scripts/jquery-3.6.3.min.js"></script>
        <script src="scripts/script.js"></script>
        <script src="scripts/user.js"></script>
        <script src="scripts/user_functions.js"></script>
        <script> loadHeader("#headerDiv");</script>

        <link rel="stylesheet" href="styles/style.css">
        <link rel="stylesheet" href="styles/user_pages.css">
    </head>


    <body>
        <div id="headerDiv"></div>
        <div class="content">
            <span class="icon"><i class="fa-solid fa-user-pen fa-2xl"></i></span> <br>
            <br>
            <div class="selection">
                <label for="id">Select ID  </label>
                <select id="userId">

                </select>
                <br>
                </div>

                <div class="data">
                    <label for="name">Name  </label> <br>
                    <input type="text" id="userName" onkeyup="requiredInput()" >
                    <!-- <button type="button" id="editButton1">Edit</button> -->
                    <br>
                    <label for="password">Password  </label> <br>
                    <input type="password" id="userPassword" onkeyup="requiredInput()">
                    <button type="button" id="generateButton">generate</button>
                    <br><br>
                    <input id="showPass"type="checkbox"  onclick="myFunction()"> Show Password

                </div>
                
        <button type="button" id="deleteButton" disabled>Delete</button>
        <button type="button" id="saveButton" disabled>Save</button>

        </div>

        <script>
        getUserIDs();

        // enable editing username and password 
        document.getElementById('generateButton').onclick = function(){
        document.getElementById('userPassword').readOnly = false; }


        function generateRandomPassword(length) {
        var characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*()"; // List of characters to include in the password
        var password = "";
        
        for (var i = 0; i < length; i++) {
            var randomIndex = Math.floor(Math.random() * characters.length); // Generate random index to pick a character
            password += characters[randomIndex]; // Append the randomly picked character to the password
        } return password;
    }

        document.getElementById('generateButton').onclick = function generateAndSetPassword() {
        var generatedPassword = generateRandomPassword(8); // Generate a random password with length 8
        document.getElementById("userPassword").value = generatedPassword; // Set the generated password as the value of the input field
    }
    



        document.getElementById("deleteButton").addEventListener("click", deleteUser);
        document.getElementById("deleteButton").addEventListener("click", redirect);



        document.getElementById("userId").addEventListener("change", edit);

        function requiredInput() {
	        if(document.getElementById("userName").value && document.getElementById("userPassword").value != "") { 
                document.getElementById("saveButton").addEventListener("click", save);
                document.getElementById("saveButton").addEventListener("click", redirect);

            }
        }

        const optionSelect = document.getElementById('userId');
        const deleteButton = document.getElementById('deleteButton');
        const saveButton = document.getElementById('saveButton');
      
        optionSelect.addEventListener('change', function() {
        if(optionSelect.value !== '') {
            saveButton.disabled = false;
            deleteButton.disabled = false;

        } else {
            saveButton.disabled = true;
            deleteButton.disabled = true;
        }
      });

      
        </script>
    </body>
</html>