<!DOCTYPE html>
<html>
    <head>
        <title id="t">View All</title>
        <meta name="author" content="Hassan Magdi">
        <script src="scripts/jquery-3.6.3.min.js"></script>
        <script src="scripts/script.js"></script>
        <link  rel = "icon" href = "images/logo.jpg"  type = "image/x-icon">
        <script src="scripts/viewAll.js"></script>
        <script>
            loadHeader("#headerDiv");
        </script>
        <link rel="stylesheet" href="styles/style.css">
        <link rel="stylesheet" href="styles/viewAll.css">
        
        
    </head>
    <body>
        <div id="headerDiv"></div>
        
        <div class="head">
            <form id="form" > 
                <input type="search" id="searchInput" name="q" placeholder="Search student...">
              </form>
              
            </div>
        
        <hr>
        <div class ="table-box">
        <table id="searchInput">
            
            <thead >
                <th>Id</th>
                <th >Name</th>
                <th>Status<br><br>
                    <label>
                    <input type="checkbox" id="active">
                        Show Active only
                    </label>
                </th>
            </thead> 
            <div class ="table-content">
            <tbody id="tableBody">
                
            </tbody>
            </div>
            </table>
        <!-- load data -->
        <script>
            let storage = window.localStorage;

            let students = JSON.parse(storage.getItem("StudentsData"));
            let i=0;
            let checkbox = document.querySelector('input[name="active"]');
            students.forEach(function(studentJ) {
                let student = JSON.parse(studentJ);
                
                if(student.status ){
                    $('tbody').append(`<tr class="Active" id="${i}">
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td><P style="color:green;">Active</p></td>
                    </tr>`);
                    i++;
                }
                else{
                $('tbody').append(`<tr class="inactive" id="${i}">
                    <td>${student.id}</td>
                    <td>${student.name}</td>
                    <td><P style="color:red;">Inactive</p></td>
                    </tr>`);
                    i++;
                }
            });
            $('tbody').on('click', 'tr', function() {
            let id = $(this).attr('id');
            window.localStorage.setItem("StudentIndex",id)
            window.location.href = 'show_profile.html?id=' + id;;
        });
            
        </script>
    </body>
    </div>
    
</html>